(function(){"use strict";var e={4774:function(e,t,n){var o=n(3751),i=n(641);const a={id:"app"};function r(e,t,n,o,r,s){const l=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(l)])}var s={name:"App"},l=n(6262);const c=(0,l.A)(s,[["render",r]]);var u=c,d=n(6166),h=n(33);const g=e=>((0,i.Qi)("data-v-76b9162c"),e=e(),(0,i.jt)(),e),p=g((()=>(0,i.Lk)("h1",null,"Welcome to the Camping Management System",-1))),k=g((()=>(0,i.Lk)("label",{for:"camping_site"},"Camping Site:",-1))),m=["value"],f=g((()=>(0,i.Lk)("label",{for:"start_date"},"Start Date:",-1))),b=g((()=>(0,i.Lk)("label",{for:"end_date"},"End Date:",-1))),v=g((()=>(0,i.Lk)("button",{type:"submit"},"Go to Booking View",-1)));function C(e,t,n,a,r,s){const l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",null,[p,(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>s.goToBookingView&&s.goToBookingView(...e)),["prevent"]))},[k,(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.campingSite=e),id:"camping_site",required:""},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.campingSites,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,h.v_)(e.name),9,m)))),128))],512),[[o.u1,r.campingSite]]),f,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>r.startDate=e),id:"start_date",required:""},null,512),[[o.Jo,r.startDate]]),b,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.endDate=e),id:"end_date",required:""},null,512),[[o.Jo,r.endDate]]),v],32),(0,i.Lk)("nav",null,[(0,i.Lk)("ul",null,[(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/billing"},{default:(0,i.k6)((()=>[(0,i.eW)("Billing View")])),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/bookings"},{default:(0,i.k6)((()=>[(0,i.eW)("Booking View")])),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(l,{to:"/invoice"},{default:(0,i.k6)((()=>[(0,i.eW)("Create Invoice")])),_:1})])])])])}n(4114);var L={name:"StartPageView",data(){return{campingSites:[],campingSite:"",startDate:"",endDate:""}},created(){this.fetchCampingSites()},methods:{fetchCampingSites(){fetch("/api/camping_sites/").then((e=>e.json())).then((e=>{0===e.length?console.log("No camping sites found"):this.campingSites=e})).catch((e=>{console.error("Error fetching camping sites:",e)}))},goToBookingView(){console.log("Navigating to bookings view with parameters:",{camping_site:this.campingSite,start_date:this.startDate,end_date:this.endDate}),this.$router.push({path:"/bookings",query:{camping_site:this.campingSite,start_date:this.startDate,end_date:this.endDate}})}}};const _=(0,l.A)(L,[["render",C],["__scopeId","data-v-76b9162c"]]);var w=_;const S=e=>((0,i.Qi)("data-v-75cdf7a4"),e=e(),(0,i.jt)(),e),y=S((()=>(0,i.Lk)("h1",null,"Generate Billing",-1))),D=S((()=>(0,i.Lk)("label",{for:"camping_site"},"Camping Site:",-1))),E=["value"],B=S((()=>(0,i.Lk)("label",{for:"start_date"},"Start Date:",-1))),X=S((()=>(0,i.Lk)("label",{for:"end_date"},"End Date:",-1))),T=S((()=>(0,i.Lk)("button",{type:"submit"},"Generate Billing",-1))),V={key:0};function j(e,t,n,a,r,s){return(0,i.uX)(),(0,i.CE)("div",null,[y,(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>s.generateBilling&&s.generateBilling(...e)),["prevent"]))},[D,(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.campingSite=e),id:"camping_site"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.campingSites,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,h.v_)(e.name),9,E)))),128))],512),[[o.u1,r.campingSite]]),B,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>r.startDate=e),id:"start_date",required:""},null,512),[[o.Jo,r.startDate]]),X,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.endDate=e),id:"end_date",required:""},null,512),[[o.Jo,r.endDate]]),T],32),r.message?((0,i.uX)(),(0,i.CE)("p",V,(0,h.v_)(r.message),1)):(0,i.Q3)("",!0)])}var A={name:"BillingView",data(){return{campingSites:[],campingSite:"",startDate:"",endDate:"",message:""}},created(){this.fetchCampingSites()},methods:{fetchCampingSites(){fetch("/api/camping_sites/").then((e=>e.json())).then((e=>{this.campingSites=e}))},generateBilling(){fetch("/api/billing/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify({camping_site:this.campingSite,start_date:this.startDate,end_date:this.endDate}),credentials:"include"}).then((e=>e.json())).then((e=>{this.message=e.message}))},getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}}};const O=(0,l.A)(A,[["render",j],["__scopeId","data-v-75cdf7a4"]]);var F=O;const $=e=>((0,i.Qi)("data-v-c53d3314"),e=e(),(0,i.jt)(),e),I=$((()=>(0,i.Lk)("h1",null,"Booking View",-1))),Q={key:0},N={key:1},P={border:"1"},U=$((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Booking Number"),(0,i.Lk)("th",null,"Campingplatz"),(0,i.Lk)("th",null,"Status"),(0,i.Lk)("th",null,"Abrechnungsstatus"),(0,i.Lk)("th",null,"Price"),(0,i.Lk)("th",null,"Commission Rate"),(0,i.Lk)("th",null,"Actions")])],-1))),q=["onUpdate:modelValue"],R=["onClick"],J=["onClick"],x=["onClick"],G=["onClick"],K=["onClick"],W={key:3},z={key:4},M={key:5},H={key:0},Y=$((()=>(0,i.Lk)("h2",null,"Logs",-1)));function Z(e,t,n,a,r,s){const l=(0,i.g2)("BookingLogs");return(0,i.uX)(),(0,i.CE)("div",null,[I,r.campingSite?((0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("p",null,"Showing bookings for: "+(0,h.v_)(r.campingSite.name),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.fetchAllBookings&&s.fetchAllBookings(...e))},"Show All Bookings"),(0,i.Lk)("table",P,[U,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.bookings,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,h.v_)(e.booking_number),1),(0,i.Lk)("td",null,(0,h.v_)(e.campingplatz_id),1),(0,i.Lk)("td",null,(0,h.v_)(e.status),1),(0,i.Lk)("td",null,(0,h.v_)(e.abrechnungsstatus),1),(0,i.Lk)("td",null,(0,h.v_)(e.price),1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.commission_rate=t,step:"0.1"},null,8,q),[[o.Jo,e.commission_rate]]),(0,i.Lk)("button",{onClick:t=>s.updateCommissionRate(e.id,e.commission_rate)},"Update",8,R)]),(0,i.Lk)("td",null,["abgerechnet"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>s.markAsBilled(e.id)}," Abrechnen ",8,J)):(0,i.Q3)("",!0),"storniert"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t=>s.cancelBooking(e.id)}," Stornieren ",8,x)):(0,i.Q3)("",!0),"gutschreiben"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:2,onClick:t=>s.creditBooking(e.id)}," Gutschreiben ",8,G)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t=>s.viewLogs(e.id)}," View Logs ",8,K),"abgerechnet"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",W,"Abgerechnet")):(0,i.Q3)("",!0),"storniert"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",z,"Storniert")):(0,i.Q3)("",!0),"gutschreiben"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",M,"Gutschreiben")):(0,i.Q3)("",!0)])])))),128))])]),r.logs.length?((0,i.uX)(),(0,i.CE)("div",H,[Y,(0,i.bF)(l,{logs:r.logs},null,8,["logs"])])):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("p",Q,"No camping site selected"))])}const ee=e=>((0,i.Qi)("data-v-c267bd52"),e=e(),(0,i.jt)(),e),te=ee((()=>(0,i.Lk)("h2",null,"Logs",-1))),ne={border:"1"},oe=ee((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Field Changed"),(0,i.Lk)("th",null,"Old Value"),(0,i.Lk)("th",null,"New Value"),(0,i.Lk)("th",null,"Date"),(0,i.Lk)("th",null,"User")])],-1)));function ie(e,t,n,o,a,r){return(0,i.uX)(),(0,i.CE)("div",null,[te,(0,i.Lk)("table",ne,[oe,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.logs,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,h.v_)(e.field_changed),1),(0,i.Lk)("td",null,(0,h.v_)(e.old_value),1),(0,i.Lk)("td",null,(0,h.v_)(e.new_value),1),(0,i.Lk)("td",null,(0,h.v_)(e.date),1),(0,i.Lk)("td",null,(0,h.v_)(e.user),1)])))),128))])])])}var ae={name:"BookingLogs",props:{logs:{type:Array,required:!0}}};const re=(0,l.A)(ae,[["render",ie],["__scopeId","data-v-c267bd52"]]);var se=re,le={name:"BookingListView",components:{BookingLogs:se},data(){return{bookings:[],logs:[],campingSite:null,startDate:"",endDate:""}},created(){this.fetchQueryParams(),this.fetchBookings()},methods:{fetchQueryParams(){this.campingSite=this.$route.query.camping_site,this.startDate=this.$route.query.start_date,this.endDate=this.$route.query.end_date},fetchBookings(){console.log(this.campingSite,this.startDate,this.endDate),fetch(`/api/bookings?camping_site=${this.campingSite}&start_date=${this.startDate}&end_date=${this.endDate}`).then((e=>e.json())).then((e=>{this.bookings=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},fetchAllBookings(){fetch("/api/bookings").then((e=>e.json())).then((e=>{this.bookings=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},updateCommissionRate(e,t){fetch(`/api/bookings/${e}/update_commission_rate/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify({commission_rate:t}),credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},markAsBilled(e){fetch(`/api/bookings/${e}/mark_as_billed/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},cancelBooking(e){fetch(`/api/bookings/${e}/cancel/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},creditBooking(e){fetch(`/api/bookings/${e}/credit/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},viewLogs(e){fetch(`/api/bookings/${e}/logs/`).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{this.logs=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}}};const ce=(0,l.A)(le,[["render",Z],["__scopeId","data-v-c53d3314"]]);var ue=ce;const de=(0,i.Lk)("h1",null,"Create Invoice",-1),he=[de];function ge(e,t,n,o,a,r){return(0,i.uX)(),(0,i.CE)("div",null,he)}var pe={name:"InvoiceView"};const ke=(0,l.A)(pe,[["render",ge]]);var me=ke;const fe=[{path:"/",name:"StartPageView",component:w},{path:"/billing",name:"BillingView",component:F},{path:"/bookings",name:"BookingListView",component:ue},{path:"/invoice",name:"InvoiceView",component:me}],be=(0,d.aE)({history:(0,d.LA)(),routes:fe});var ve=be,Ce=n(6278),Le=(0,Ce.y$)({state:{selectedCampingSite:null,startDate:"",endDate:""},mutations:{setSelectedCampingSite(e,t){e.selectedCampingSite=t},setStartDate(e,t){e.startDate=t},setEndDate(e,t){e.endDate=t}},actions:{updateCampingSite({commit:e},t){e("setSelectedCampingSite",t)},updateStartDate({commit:e},t){e("setStartDate",t)},updateEndDate({commit:e},t){e("setEndDate",t)}},getters:{getSelectedCampingSite:e=>e.selectedCampingSite,getStartDate:e=>e.startDate,getEndDate:e=>e.endDate}});(0,o.Ef)(u).use(ve).use(Le).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],i=e[u][1],a=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(s=!1,a<r&&(r=a));if(s){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,i,a]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,a,r=o[0],s=o[1],l=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var u=l(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkcamping_frontend"]=self["webpackChunkcamping_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(4774)}));o=n.O(o)})();
//# sourceMappingURL=app.fc08f110.js.map
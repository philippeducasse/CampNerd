(function(){"use strict";var e={791:function(e,t,n){var o=n(5130),i=n(6768);const a={id:"app"};function s(e,t,n,o,s,r){const l=(0,i.g2)("NavBar"),c=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.bF)(l),(0,i.bF)(c)])}function r(e,t,n,o,a,s){const r=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("nav",null,[(0,i.Lk)("ul",null,[(0,i.Lk)("li",null,[(0,i.bF)(r,{to:"/"},{default:(0,i.k6)((()=>[(0,i.eW)("Home")])),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(r,{to:"/billing"},{default:(0,i.k6)((()=>[(0,i.eW)("Billing View")])),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(r,{to:"/bookings"},{default:(0,i.k6)((()=>[(0,i.eW)("Booking View")])),_:1})]),(0,i.Lk)("li",null,[(0,i.bF)(r,{to:"/invoice"},{default:(0,i.k6)((()=>[(0,i.eW)("Create Invoice")])),_:1})])])])}var l={name:"NavBar"},c=n(1241);const u=(0,c.A)(l,[["render",r],["__scopeId","data-v-cf7fb508"]]);var d=u,h={name:"App",components:{NavBar:d}};const k=(0,c.A)(h,[["render",s]]);var g=k,p=n(973),m=n(4232);const b=e=>((0,i.Qi)("data-v-6002aedb"),e=e(),(0,i.jt)(),e),f=b((()=>(0,i.Lk)("h1",null,"Welcome to the Camping Management System",-1))),v=b((()=>(0,i.Lk)("label",{for:"camping_site"},"Camping Site:",-1))),C=["value"],L=b((()=>(0,i.Lk)("label",{for:"start_date"},"Start Date:",-1))),_=b((()=>(0,i.Lk)("label",{for:"end_date"},"End Date:",-1))),S=b((()=>(0,i.Lk)("button",{type:"submit"},"Go to Booking View",-1)));function w(e,t,n,a,s,r){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",null,[f,(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>r.goToBookingView&&r.goToBookingView(...e)),["prevent"]))},[v,(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.campingSite=e),id:"camping_site",required:""},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.campingSites,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.name),9,C)))),128))],512),[[o.u1,s.campingSite]]),L,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>s.startDate=e),id:"start_date",required:""},null,512),[[o.Jo,s.startDate]]),_,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.endDate=e),id:"end_date",required:""},null,512),[[o.Jo,s.endDate]]),S],32)]),(0,i.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.goToBookingView&&r.goToBookingView(...e))},"Show all Bookings")],64)}n(4114);var y={name:"StartPageView",data(){return{campingSites:[],campingSite:"",startDate:"",endDate:""}},created(){this.fetchCampingSites()},methods:{fetchCampingSites(){fetch("/api/camping_sites/").then((e=>e.json())).then((e=>{0===e.length?console.log("No camping sites found"):this.campingSites=e})).catch((e=>{console.error("Error fetching camping sites:",e)}))},fetchAllBookings(){fetch("/api/bookings").then((e=>e.json())).then((e=>{this.bookings=e,this.$router.push({path:"/bookings"})})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},goToBookingView(){let e="/bookings";const t={};this.campingSite&&(t.camping_site=this.campingSite),this.startDate&&(t.start_date=this.startDate),this.endDate&&(t.end_date=this.endDate),this.$router.push({path:e,query:t})}}};const D=(0,c.A)(y,[["render",w],["__scopeId","data-v-6002aedb"]]);var B=D;const E=e=>((0,i.Qi)("data-v-75cdf7a4"),e=e(),(0,i.jt)(),e),T=E((()=>(0,i.Lk)("h1",null,"Generate Billing",-1))),X=E((()=>(0,i.Lk)("label",{for:"camping_site"},"Camping Site:",-1))),j=["value"],I=E((()=>(0,i.Lk)("label",{for:"start_date"},"Start Date:",-1))),V=E((()=>(0,i.Lk)("label",{for:"end_date"},"End Date:",-1))),F=E((()=>(0,i.Lk)("button",{type:"submit"},"Generate Billing",-1))),O={key:0};function A(e,t,n,a,s,r){return(0,i.uX)(),(0,i.CE)("div",null,[T,(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>r.generateBilling&&r.generateBilling(...e)),["prevent"]))},[X,(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.campingSite=e),id:"camping_site"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.campingSites,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,m.v_)(e.name),9,j)))),128))],512),[[o.u1,s.campingSite]]),I,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>s.startDate=e),id:"start_date",required:""},null,512),[[o.Jo,s.startDate]]),V,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>s.endDate=e),id:"end_date",required:""},null,512),[[o.Jo,s.endDate]]),F],32),s.message?((0,i.uX)(),(0,i.CE)("p",O,(0,m.v_)(s.message),1)):(0,i.Q3)("",!0)])}var U={name:"BillingView",data(){return{campingSites:[],campingSite:"",startDate:"",endDate:"",message:""}},created(){this.fetchCampingSites()},methods:{fetchCampingSites(){fetch("/api/camping_sites/").then((e=>e.json())).then((e=>{this.campingSites=e}))},generateBilling(){fetch("/api/billing/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify({camping_site:this.campingSite,start_date:this.startDate,end_date:this.endDate}),credentials:"include"}).then((e=>e.json())).then((e=>{this.message=e.message}))},getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}}};const Q=(0,c.A)(U,[["render",A],["__scopeId","data-v-75cdf7a4"]]);var $=Q;const N=e=>((0,i.Qi)("data-v-0c0ded7a"),e=e(),(0,i.jt)(),e),P=N((()=>(0,i.Lk)("h1",null,"Booking View",-1))),R={border:"1"},q=N((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Booking Number"),(0,i.Lk)("th",null,"Campingplatz"),(0,i.Lk)("th",null,"Status"),(0,i.Lk)("th",null,"Abrechnungsstatus"),(0,i.Lk)("th",null,"Price"),(0,i.Lk)("th",null,"Commission Rate"),(0,i.Lk)("th",null,"Total Commission"),(0,i.Lk)("th",null,"Actions")])],-1))),J=["onUpdate:modelValue"],G=["onClick"],K=["onClick"],x=["onClick"],W=["onClick"],M=["onClick"],z=["onClick"],H={key:3},Y={key:4},Z={key:5},ee={key:0},te=N((()=>(0,i.Lk)("h2",null,"Logs",-1)));function ne(e,t,n,a,s,r){const l=(0,i.g2)("BookingLogs");return(0,i.uX)(),(0,i.CE)("div",null,[P,(0,i.Lk)("p",null,"Showing bookings for: "+(0,m.v_)(s.campingSite.name),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.fetchAllBookings&&r.fetchAllBookings(...e))},"Show All Bookings"),(0,i.Lk)("table",R,[q,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.bookings,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,m.v_)(e.booking_number),1),(0,i.Lk)("td",null,(0,m.v_)(e.campingplatz_id),1),(0,i.Lk)("td",null,(0,m.v_)(e.status),1),(0,i.Lk)("td",null,(0,m.v_)(e.abrechnungsstatus),1),(0,i.Lk)("td",null,(0,m.v_)(e.price),1),(0,i.Lk)("td",null,[(0,i.bo)((0,i.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.commission_rate=t,step:"0.1"},null,8,J),[[o.Jo,e.commission_rate]]),(0,i.Lk)("button",{onClick:t=>r.updateCommissionRate(e.id,e.commission_rate)},"Update",8,G)]),(0,i.Lk)("td",null,(0,m.v_)(e.total_commission),1),(0,i.Lk)("td",null,["abgerechnet"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>r.markAsBilled(e.id)}," Abrechnen ",8,K)):(0,i.Q3)("",!0),"storniert"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t=>r.cancelBooking(e.id)}," Stornieren ",8,x)):(0,i.Q3)("",!0),"gutschreiben"!==e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("button",{key:2,onClick:t=>r.creditBooking(e.id)}," Gutschreiben ",8,W)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t=>r.viewLogs(e.id)}," View Logs ",8,M),(0,i.Lk)("button",{onClick:t=>r.createInvoice(e.id)}," Create Invoice ",8,z),"abgerechnet"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",H,"Abgerechnet")):(0,i.Q3)("",!0),"storniert"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",Y,"Storniert")):(0,i.Q3)("",!0),"gutschreiben"===e.abrechnungsstatus?((0,i.uX)(),(0,i.CE)("span",Z,"Gutschreiben")):(0,i.Q3)("",!0)])])))),128))])]),s.logs.length?((0,i.uX)(),(0,i.CE)("div",ee,[te,(0,i.bF)(l,{logs:s.logs},null,8,["logs"])])):(0,i.Q3)("",!0)])}const oe=e=>((0,i.Qi)("data-v-c267bd52"),e=e(),(0,i.jt)(),e),ie=oe((()=>(0,i.Lk)("h2",null,"Logs",-1))),ae={border:"1"},se=oe((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Field Changed"),(0,i.Lk)("th",null,"Old Value"),(0,i.Lk)("th",null,"New Value"),(0,i.Lk)("th",null,"Date"),(0,i.Lk)("th",null,"User")])],-1)));function re(e,t,n,o,a,s){return(0,i.uX)(),(0,i.CE)("div",null,[ie,(0,i.Lk)("table",ae,[se,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.logs,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,m.v_)(e.field_changed),1),(0,i.Lk)("td",null,(0,m.v_)(e.old_value),1),(0,i.Lk)("td",null,(0,m.v_)(e.new_value),1),(0,i.Lk)("td",null,(0,m.v_)(e.date),1),(0,i.Lk)("td",null,(0,m.v_)(e.user),1)])))),128))])])])}var le={name:"BookingLogs",props:{logs:{type:Array,required:!0}}};const ce=(0,c.A)(le,[["render",re],["__scopeId","data-v-c267bd52"]]);var ue=ce,de={name:"BookingListView",components:{BookingLogs:ue},data(){return{bookings:[],logs:[],campingSite:null,startDate:"",endDate:""}},created(){this.fetchQueryParams(),this.fetchBookings()},methods:{fetchQueryParams(){this.campingSite=this.$route.query.camping_site,this.startDate=this.$route.query.start_date,this.endDate=this.$route.query.end_date},fetchBookings(){console.log(this.campingSite,this.startDate,this.endDate),fetch(`/api/bookings?camping_site=${this.campingSite}&start_date=${this.startDate}&end_date=${this.endDate}`).then((e=>e.json())).then((e=>{this.bookings=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},fetchAllBookings(){fetch("/api/bookings").then((e=>e.json())).then((e=>{this.bookings=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},updateCommissionRate(e,t){fetch(`/api/bookings/${e}/update_commission_rate/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify({commission_rate:t}),credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},markAsBilled(e){fetch(`/api/bookings/${e}/mark_as_billed/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},cancelBooking(e){fetch(`/api/bookings/${e}/cancel/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},createInvoice(e){fetch(`/api/bookings/${e}/create_invoice/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>e.json())).then((e=>{this.message=e.message,this.fetchBookings()})).catch((e=>{console.error("Error creating invoice:",e)}))},creditBooking(e){fetch(`/api/bookings/${e}/credit/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((()=>{this.fetchBookings()})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},viewLogs(e){fetch(`/api/bookings/${e}/logs/`).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{this.logs=e})).catch((e=>{console.error("There was a problem with the fetch operation:",e)}))},getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}}};const he=(0,c.A)(de,[["render",ne],["__scopeId","data-v-0c0ded7a"]]);var ke=he;const ge=e=>((0,i.Qi)("data-v-3ed80173"),e=e(),(0,i.jt)(),e),pe=ge((()=>(0,i.Lk)("h1",null,"Invoice Management",-1))),me=ge((()=>(0,i.Lk)("label",{for:"billing_date"},"Billing Date:",-1))),be={key:0},fe=ge((()=>(0,i.Lk)("h2",null,"Invoices",-1))),ve=ge((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"Booking ID"),(0,i.Lk)("th",null,"Booking Number"),(0,i.Lk)("th",null,"Price"),(0,i.Lk)("th",null,"Commission Rate"),(0,i.Lk)("th",null,"Total Commission"),(0,i.Lk)("th",null,"Customer Name"),(0,i.Lk)("th",null,"Departure Date")])],-1))),Ce={key:1};function Le(e,t,n,a,s,r){return(0,i.uX)(),(0,i.CE)("div",null,[pe,(0,i.Lk)("div",null,[me,(0,i.bo)((0,i.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>s.billingDate=e),id:"billing_date",required:""},null,512),[[o.Jo,s.billingDate]]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.generateInvoices&&r.generateInvoices(...e))},"Generate Invoices")]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.createCredits&&r.createCredits(...e))},"Create Credits")]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.displayUnsentInvoices&&r.displayUnsentInvoices(...e))},"Display Unsent Invoices")]),s.invoices.length?((0,i.uX)(),(0,i.CE)("div",be,[fe,(0,i.Lk)("table",null,[ve,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.invoices,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.booking_id},[(0,i.Lk)("td",null,(0,m.v_)(e.booking_id),1),(0,i.Lk)("td",null,(0,m.v_)(e.booking_number),1),(0,i.Lk)("td",null,(0,m.v_)(e.price),1),(0,i.Lk)("td",null,(0,m.v_)(e.commission_rate),1),(0,i.Lk)("td",null,(0,m.v_)(e.total_commission),1),(0,i.Lk)("td",null,(0,m.v_)(e.customer_name),1),(0,i.Lk)("td",null,(0,m.v_)(e.departure_date),1)])))),128))])])])):(0,i.Q3)("",!0),s.message?((0,i.uX)(),(0,i.CE)("p",Ce,(0,m.v_)(s.message),1)):(0,i.Q3)("",!0)])}var _e={name:"InvoiceView",data(){return{billingDate:"",invoices:[],message:""}},methods:{generateInvoices(){fetch("/api/generate_invoices/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify({billing_date:this.billingDate}),credentials:"include"}).then((e=>e.json())).then((e=>{this.message=e.message,"success"===e.status&&(this.invoices=e.invoices)}))},createCredits(){fetch("/api/create_credits/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>e.json())).then((e=>{this.message=e.message}))},displayUnsentInvoices(){fetch("/api/unsent_invoices/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},credentials:"include"}).then((e=>e.json())).then((e=>{this.invoices=e.invoices}))},getCookie(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let o=0;o<n.length;o++){const i=n[o].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}}};const Se=(0,c.A)(_e,[["render",Le],["__scopeId","data-v-3ed80173"]]);var we=Se;const ye=[{path:"/",name:"StartPageView",component:B},{path:"/billing",name:"BillingView",component:$},{path:"/bookings",name:"BookingListView",component:ke},{path:"/invoice",name:"InvoiceView",component:we}],De=(0,p.aE)({history:(0,p.LA)(),routes:ye});var Be=De,Ee=n(782),Te=(0,Ee.y$)({state:{selectedCampingSite:null,startDate:"",endDate:""},mutations:{setSelectedCampingSite(e,t){e.selectedCampingSite=t},setStartDate(e,t){e.startDate=t},setEndDate(e,t){e.endDate=t}},actions:{updateCampingSite({commit:e},t){e("setSelectedCampingSite",t)},updateStartDate({commit:e},t){e("setStartDate",t)},updateEndDate({commit:e},t){e("setEndDate",t)}},getters:{getSelectedCampingSite:e=>e.selectedCampingSite,getStartDate:e=>e.startDate,getEndDate:e=>e.endDate}});(0,o.Ef)(g).use(Be).use(Te).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,a){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],i=e[u][1],a=e[u][2];for(var r=!0,l=0;l<o.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(r=!1,a<s&&(s=a));if(r){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,a,s=o[0],r=o[1],l=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var u=l(n)}for(t&&t(o);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},o=self["webpackChunkcamping_frontend"]=self["webpackChunkcamping_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(791)}));o=n.O(o)})();
//# sourceMappingURL=app.e8fde96b.js.map